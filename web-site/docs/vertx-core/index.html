<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0">
<title>Vert.x Core Manual</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after,a[href^="mailto:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>Vert.x Core Manual</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_in_the_beginning_there_was_vert_x">In the beginning there was Vert.x</a>
<ul class="sectlevel2">
<li><a href="#_specifying_options_when_creating_a_vertx_object">Specifying options when creating a Vertx object</a></li>
<li><a href="#_creating_a_clustered_vert_x_object">Creating a clustered Vert.x object</a></li>
</ul>
</li>
<li><a href="#_are_you_fluent">Are you fluent?</a></li>
<li><a href="#_don_t_call_us_we_ll_call_you">Don&#8217;t call us, we&#8217;ll call you.</a></li>
<li><a href="#_don_t_block_me">Don&#8217;t block me!</a></li>
<li><a href="#_reactor_and_multi_reactor">Reactor and Multi-Reactor</a></li>
<li><a href="#golden_rule">The Golden Rule - <strong>Don&#8217;t Block the Event Loop</strong></a></li>
<li><a href="#blocking_code">Running blocking code</a></li>
<li><a href="#_verticles">Verticles</a>
<ul class="sectlevel2">
<li><a href="#_writing_verticles">Writing Verticles</a></li>
<li><a href="#_asynchronous_verticle_start_and_stop">Asynchronous Verticle start and stop</a></li>
<li><a href="#_verticle_types">Verticle Types</a></li>
<li><a href="#_standard_verticles">Standard verticles</a></li>
<li><a href="#worker_verticles">Worker verticles</a></li>
<li><a href="#_deploying_verticles_programmatically">Deploying verticles programmatically</a></li>
<li><a href="#_rules_for_mapping_a_verticle_name_to_a_verticle_factory">Rules for mapping a verticle name to a verticle factory</a></li>
<li><a href="#_how_are_verticle_factories_located">How are Verticle Factories located?</a></li>
<li><a href="#_waiting_for_deployment_to_complete">Waiting for deployment to complete</a></li>
<li><a href="#_undeploying_verticle_deployments">Undeploying verticle deployments</a></li>
<li><a href="#_specifying_number_of_verticle_instances">Specifying number of verticle instances</a></li>
<li><a href="#_passing_configuration_to_a_verticle">Passing configuration to a verticle</a></li>
<li><a href="#_accessing_environment_variables_in_a_verticle">Accessing environment variables in a Verticle</a></li>
<li><a href="#_verticle_isolation_groups">Verticle Isolation Groups</a></li>
<li><a href="#_high_availability">High Availability</a></li>
<li><a href="#_running_verticles_from_the_command_line">Running Verticles from the command line</a></li>
<li><a href="#_causing_vert_x_to_exit">Causing Vert.x to exit</a></li>
<li><a href="#_the_context_object">The Context object</a></li>
<li><a href="#_executing_periodic_and_delayed_actions">Executing periodic and delayed actions</a></li>
</ul>
</li>
<li><a href="#_buffers">Buffers</a></li>
<li><a href="#event_bus">Getting a reference to the event bus</a></li>
<li><a href="#_creating_http_clients_and_servers">Creating HTTP Clients and Servers</a></li>
<li><a href="#_shared_data">Shared Data</a>
<ul class="sectlevel2">
<li><a href="#_local_shared_data">Local Shared Data</a></li>
<li><a href="#_clustered_distributed_maps">Clustered Distributed Maps</a></li>
</ul>
</li>
<li><a href="#_udp">UDP</a></li>
<li><a href="#_file_system">File System</a></li>
<li><a href="#_dns">DNS</a></li>
<li><a href="#_thread_safety">Thread safety</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>At the heart of Vert.x is a set of Java APIs that we call <strong>Vert.x Core</strong></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/eclipse/vert.x">Repository</a>.</p>
</div>
<div class="paragraph">
<p>Vert.x core provides functionality for things like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Writing TCP clients and servers</p>
</li>
<li>
<p>Writing HTTP clients and servers including support for WebSockets</p>
</li>
<li>
<p>The Event bus</p>
</li>
<li>
<p>Shared data - local maps and clustered distributed maps</p>
</li>
<li>
<p>Periodic and delayed actions</p>
</li>
<li>
<p>Deploying and undeploying Verticles</p>
</li>
<li>
<p>Datagram Sockets</p>
</li>
<li>
<p>DNS client</p>
</li>
<li>
<p>File system access</p>
</li>
<li>
<p>High availability</p>
</li>
<li>
<p>Clustering</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The functionality in core is fairly low level - you won&#8217;t find stuff like database access, authorisation or high level
web functionality here - that kind of stuff you&#8217;ll find in <strong>Vert.x ext</strong> (extensions).</p>
</div>
<div class="paragraph">
<p>Vert.x core is small and lightweight. You just use the parts you want. It&#8217;s also entirely embeddable in your
existing applications - we don&#8217;t force you to structure your applications in a special way just so you can use
Vert.x.</p>
</div>
<div class="paragraph">
<p>You can use core from any of the other languages that Vert.x supports. But here&#8217;a a cool bit - we don&#8217;t force
you to use the Java API directly from, say, JavaScript or Ruby - after all, different languages have different conventions
and idioms, and it would be odd to force Java idioms on Ruby developers (for example).
Instead, we automatically generate an <strong>idiomatic</strong> equivalent of the core Java APIs for each language.</p>
</div>
<div class="paragraph">
<p>From now on we&#8217;ll just use the word <strong>core</strong> to refer to Vert.x core.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s discuss the different concepts and features in core.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_the_beginning_there_was_vert_x">In the beginning there was Vert.x</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Much of this is Java specific - need someway of swapping in language specific parts
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can&#8217;t do much in Vert.x-land unless you can commune with a <a href="apidocs/io/vertx/core/Vertx.html"><code>Vertx</code></a> object!</p>
</div>
<div class="paragraph">
<p>It&#8217;s the control centre of Vert.x and is how you do pretty much everything, including creating clients and servers,
getting a reference to the event bus, setting timers, as well as many other things.</p>
</div>
<div class="paragraph">
<p>So how do you get an instance?</p>
</div>
<div class="paragraph">
<p>If you&#8217;re embedding Vert.x then you simply create an instance as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Vertx vertx = Vertx.vertx();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;re using Verticles</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Most applications will only need a single Vert.x instance, but it&#8217;s possible to create multiple Vert.x instances if you
require, for example, isolation between the event bus or different groups of servers and clients.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_specifying_options_when_creating_a_vertx_object">Specifying options when creating a Vertx object</h3>
<div class="paragraph">
<p>When creating a Vertx object you can also specify options if the defaults aren&#8217;t right for you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Vertx vertx = Vertx.vertx(new VertxOptions().setWorkerPoolSize(40));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="apidocs/io/vertx/core/VertxOptions.html"><code>VertxOptions</code></a> object has many settings and allows you to configure things like clustering,
high availability, pool sizes and various other settings. The Javadoc describes all the settings in detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_clustered_vert_x_object">Creating a clustered Vert.x object</h3>
<div class="paragraph">
<p>If you&#8217;re creating a <strong>clustered Vert.x</strong> (See the section on the <a href="#event_bus">event bus</a> for more information
on clustering the event bus), then you will normally use the asynchronous variant to create the Vertx object.</p>
</div>
<div class="paragraph">
<p>This is because it usually takes some time (maybe a few seconds) for the different Vert.x instances in a cluster to
group together. During that time, we don&#8217;t want to block the calling thread, so we give the result to you asynchronously.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_are_you_fluent">Are you fluent?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may have noticed that in the previous examples a <strong>fluent</strong> API was used.</p>
</div>
<div class="paragraph">
<p>A fluent API is where multiple methods calls can be chained together. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">request.response().putHeader("Content-Type", "text/plain").write("some text").end();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a common pattern throughout Vert.x APIs, so get used to it.</p>
</div>
<div class="paragraph">
<p>Chaining calls like this allows you to write code that&#8217;s a little bit less verbose. Of course, if you don&#8217;t
like the fluent approach <strong>we don&#8217;t force you</strong> to do it that way, you can happily ignore it if you prefer and write
your code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpServerResponse response = request.response();
response.putHeader("Content-Type", "text/plain");
response.write("some text");
response.end();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_don_t_call_us_we_ll_call_you">Don&#8217;t call us, we&#8217;ll call you.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Vert.x APIs are largely <em>event driven</em>. This means that when things happen in Vert.x that you are interested in,
Vert.x will call you by sending you events.</p>
</div>
<div class="paragraph">
<p>Some example events are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a timer has fired</p>
</li>
<li>
<p>some data has arrived on a socket,</p>
</li>
<li>
<p>some data has been read from disk</p>
</li>
<li>
<p>an exception has occurred</p>
</li>
<li>
<p>an HTTP server has received a request</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You handle events by providing <em>handlers</em> to the Vert.x APIs. For example to receive a timer event every second you
would do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.setTimer(1000, id -&gt; {
  // This handler will get called every second
  System.out.println("timer fired!");
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or to receive an HTTP request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">server.requestHandler(request -&gt; {
  // This handler will be called every time an HTTP request is received at the server
  request.response().end("hello world!");
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some time later when Vert.x has an event to pass to your handler Vert.x will call it <strong>asynchronously</strong>.</p>
</div>
<div class="paragraph">
<p>This leads us to some important concepts in Vert.x:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_don_t_block_me">Don&#8217;t block me!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With very few exceptions (i.e. some file system operations ending in 'Sync'), none of the APIs in Vert.x block the calling thread.</p>
</div>
<div class="paragraph">
<p>If a result can be provided immediately, it will be returned immediately, otherwise you will usually provide a handler
to receive events some time later.</p>
</div>
<div class="paragraph">
<p>Because none of the Vert.x APIs block threads that means you can use Vert.x to handle a lot of concurrency using
just a small number of threads.</p>
</div>
<div class="paragraph">
<p>With a conventional blocking API the calling thread might block when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reading data from a socket</p>
</li>
<li>
<p>Writing data to disk</p>
</li>
<li>
<p>Sending a message to a recipient and waiting for a reply.</p>
</li>
<li>
<p>&#8230;&#8203; Many other situations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In all the above cases, when your thread is waiting for a result it can&#8217;t do anything else - it&#8217;s effectively useless.</p>
</div>
<div class="paragraph">
<p>This means that if you want a lot of concurrency using blocking APIs then you need a lot of threads to prevent your
application grinding to a halt.</p>
</div>
<div class="paragraph">
<p>Threads have overhead in terms of the memory they require (e.g. for their stack) and in context switching.</p>
</div>
<div class="paragraph">
<p>For the levels of concurrency required in many modern applications, a blocking approach just doesn&#8217;t scale.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reactor_and_multi_reactor">Reactor and Multi-Reactor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We mentioned before that Vert.x APIs are event driven - Vert.x passes events to handlers when they are available.</p>
</div>
<div class="paragraph">
<p>In most cases Vert.x calls your handlers using a thread called an <strong>event loop</strong>.</p>
</div>
<div class="paragraph">
<p>As nothing in Vert.x or your application blocks, the event loop can merrily run around delivering events to different handlers in succession
as they arrive.</p>
</div>
<div class="paragraph">
<p>Because nothing blocks, an event loop can potentially deliver huge amounts of events in a short amount of time.
For example a single event loop can handle many thousands of HTTP requests very quickly.</p>
</div>
<div class="paragraph">
<p>We call this the <a href="http://en.wikipedia.org/wiki/Reactor_pattern">Reactor Pattern</a>.</p>
</div>
<div class="paragraph">
<p>You may have heard of this before - for example Node.js implements this pattern.</p>
</div>
<div class="paragraph">
<p>In a standard reactor implementation there is a <strong>single event loop</strong> thread which runs around in a loop delivering all
events to all handlers as they arrive.</p>
</div>
<div class="paragraph">
<p>The trouble with a single thread is it can only run on a single core at any one time, so if you want your single threaded
reactor application (e.g. your Node.js application) to scale over your multi-core server you have to start up and
manage many different processes.</p>
</div>
<div class="paragraph">
<p>Vert.x works differently here. Instead of a single event loop, each Vertx instance maintains <strong>several event loops</strong>.
By default we choose the number based on the number of available cores on the machine, but this can be overridden.</p>
</div>
<div class="paragraph">
<p>This means a single Vertx process can scale across your server, unlike Node.js.</p>
</div>
<div class="paragraph">
<p>We call this pattern the <strong>Multi-Reactor Pattern</strong> to distinguish it from the single threaded reactor pattern.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Even though a Vertx instance maintains multiple event loops, any particular handler will never be executed
concurrently, and in most cases (with the exception of <a href="#worker_verticles">worker verticles</a>) will always be called
using the <strong>exact same event loop</strong>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="golden_rule">The Golden Rule - <strong>Don&#8217;t Block the Event Loop</strong></h2>
<div class="sectionbody">
<div class="paragraph">
<p>We already know that the Vert.x APIs are non blocking and won&#8217;t block the event loop, but that&#8217;s not much help if
you block the event loop <strong>yourself</strong> in a handler.</p>
</div>
<div class="paragraph">
<p>If you do that, then that event loop will not be able to do anything else while it&#8217;s blocked. If you block all of the
event loops in Vertx instance then your application will grind to a complete halt!</p>
</div>
<div class="paragraph">
<p>So don&#8217;t do it! <strong>You have been warned</strong>.</p>
</div>
<div class="paragraph">
<p>Examples of blocking include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Thread.sleep()</p>
</li>
<li>
<p>Waiting on a lock</p>
</li>
<li>
<p>Waiting on a mutex or monitor (e.g. synchronized section)</p>
</li>
<li>
<p>Doing a long lived database operation and waiting for a result</p>
</li>
<li>
<p>Doing a complex calculation that takes some significant time.</p>
</li>
<li>
<p>Spinning in a loop</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any of the above stop the event loop from doing anything else for a <strong>significant amount of time</strong> then you should
go immediately to the naughty step, and await further instructions.</p>
</div>
<div class="paragraph">
<p>So&#8230;&#8203; what is a <strong>significant amount of time</strong>?</p>
</div>
<div class="paragraph">
<p>How long is a piece of string? It really depends on your application and the amount of concurrency you require.</p>
</div>
<div class="paragraph">
<p>If you have a single event loop, and you want to handle 10000 http requests per second, then it&#8217;s clear that each request
can&#8217;t take more than 0.1 ms to process, so you can&#8217;t block for any more time than that.</p>
</div>
<div class="paragraph">
<p><strong>The maths is not hard and shall be left as an exercise for the reader.</strong></p>
</div>
<div class="paragraph">
<p>If your application is not responsive it might be a sign that you are blocking an event loop somewhere. To help
you diagnose such issues, Vert.x will automatically log warnings if it detects an event loop hasn&#8217;t returned for
some time. If you see warnings like these in your logs, then you should investigate.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Thread vertx-eventloop-thread-3 has been blocked for 20458 ms</pre>
</div>
</div>
<div class="paragraph">
<p>Vert.x will also provide stack traces to pinpoint exactly where the blocking is occurring.</p>
</div>
<div class="paragraph">
<p>If you want to turn of these warnings or change the settings, you can do that in the
<a href="apidocs/io/vertx/core/VertxOptions.html"><code>VertxOptions</code></a> object before creating the Vertx object.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="blocking_code">Running blocking code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a perfect world, there will be no war or hunger, all APIs will be written asynchronously and bunny rabbits will
skip hand-in-hand with baby lambs across sunny green meadows.</p>
</div>
<div class="paragraph">
<p><strong>But.. the real world is not like that. (Have you watched the news lately?)</strong></p>
</div>
<div class="paragraph">
<p>Fact is, many, if not most libraries, especially in the JVM ecosystem have synchronous APIs and many of the methods are
likely to block. A good example is the JDBC API - it&#8217;s inherently asynchronous, and no matter how hard it tries, Vert.x
cannot sprinkle magic pixie dust on it to make it asynchronous.</p>
</div>
<div class="paragraph">
<p>We&#8217;re not going to rewrite everything to be asynchronous overnight so we need to provide you a way to use "traditional"
blocking APIs safely within a Vert.x application.</p>
</div>
<div class="paragraph">
<p>As discussed before, you can&#8217;t call blocking operations directly from an event loop, as that would prevent it
from doing any other useful work. So how can you do this?</p>
</div>
<div class="paragraph">
<p>It&#8217;s done by calling <a href="apidocs/io/vertx/core/Vertx.html#executeBlocking-io.vertx.core.Handler-io.vertx.core.Handler-"><code>executeBlocking</code></a> specifying both the blocking code to execute and a
result handler to be called back asynchronous when the blocking code has been executed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.executeBlocking(future -&gt; {
  // Call some blocking API that takes a significant amount of time to return
  String result = someAPI.blockingMethod("hello");
  future.complete(result);
}, res -&gt; {
  System.out.println("The result is: " + res.result());
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>An alternative way to run blocking code is to use a <a href="#worker_verticles">worker verticle</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verticles">Verticles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x comes with a simple, scalable, <em>actor-like</em> deployment and concurrency model out of the box that
you can use to save you writing your own.</p>
</div>
<div class="paragraph">
<p><strong>This model is entirely optional and Vert.x does not force you to create your applications in this way if you don&#8217;t
want to.</strong>.</p>
</div>
<div class="paragraph">
<p>The model does not claim to be a strict actor-model implementation, but it does share similarities especially
with respect to concurrency, scaling and deployment.</p>
</div>
<div class="paragraph">
<p>To use this model, you write your code as set of <strong>verticles</strong>.</p>
</div>
<div class="paragraph">
<p>Verticles are chunks of code that get deployed and
run by Vert.x. Verticles can be written in any of the languages that Vert.x supports and a single application
can include verticles written in multiple languages.</p>
</div>
<div class="paragraph">
<p>You can think of a verticle as a bit like an actor in the <a href="http://en.wikipedia.org/wiki/Actor_model">Actor Model</a>.</p>
</div>
<div class="paragraph">
<p>An application would typically be composed of many verticle instances running in the same Vert.x instance at the same
time. The different verticle instances communicate with each other by sending messages on the <a href="#event_bus">event bus</a>.</p>
</div>
<div class="sect2">
<h3 id="_writing_verticles">Writing Verticles</h3>
<div class="paragraph">
<p>Verticle classes must implement the <a href="apidocs/io/vertx/core/Verticle.html"><code>Verticle</code></a> interface.</p>
</div>
<div class="paragraph">
<p>They can implement it directly if you like but usually it&#8217;s simpler to extend
the abstract class <a href="apidocs/io/vertx/core/AbstractVerticle.html"><code>AbstractVerticle</code></a>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example verticle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public class MyVerticle extends AbstractVerticle {

  // Called when verticle is deployed
  public void start() {
  }

  // Optional - called when verticle is undeployed
  public void stop() {
  }

}</pre>
</div>
</div>
<div class="paragraph">
<p>Normally you would override the start method like in the example above.</p>
</div>
<div class="paragraph">
<p>When Vert.x deploys the verticle it will call the start method, and when the method has completed the verticle will
be considered started.</p>
</div>
<div class="paragraph">
<p>You can also optionally override the stop method. This will be called by Vert.x when the verticle is undeployed and when
the method has completed the verticle will be considered stopped.</p>
</div>
</div>
<div class="sect2">
<h3 id="_asynchronous_verticle_start_and_stop">Asynchronous Verticle start and stop</h3>
<div class="paragraph">
<p>Sometimes you want to do something in your verticle start-up which takes some time and you don&#8217;t want the verticle to
be considered deployed until that happens. For example you might want to deploy other verticles in the start method.</p>
</div>
<div class="paragraph">
<p>You can&#8217;t block waiting for the other verticles to deploy in your start method as that would break the <a href="#golden_rule">Golden Rule</a>.</p>
</div>
<div class="paragraph">
<p>So how can you do this?</p>
</div>
<div class="paragraph">
<p>The way to do it is to implement the <strong>asynchronous</strong> start method. This version of the method takes a Future as a parameter.
When the method returns the verticle will <strong>not</strong> be considered deployed.</p>
</div>
<div class="paragraph">
<p>Some time later, after you&#8217;ve done everything you need to do (e.g. start other verticles), you can call complete
on the Future (or fail) to signal that you&#8217;re done.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public class MyVerticle extends AbstractVerticle {

  public void start(Future&lt;Void&gt; startFuture) {
    // Now deploy some other verticle:

    vertx.deployVerticle("com.foo.OtherVerticle", res -&gt; {
      if (res.succeeded()) {
        startFuture.complete();
      } else {
        startFuture.fail();
      }
    });
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, there is an asynchronous version of the stop method too. You use this if you want to do some verticle
cleanup that takes some time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public class MyVerticle extends AbstractVerticle {

  public void start() {
    // Do something
  }

  public void stop(Future&lt;Void&gt; startFuture) {
    obj.doSomethingThatTakesTime(res -&gt; {
      if (res.succeeded()) {
        startFuture.complete();
      } else {
        startFuture.fail();
      }
    });
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>INFO: You don&#8217;t need to manually undeploy child verticles started by a verticle, in the verticle&#8217;s stop method. Vert.x
will automatically undeploy any child verticles when the parent is undeployed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_verticle_types">Verticle Types</h3>
<div class="paragraph">
<p>There are three different types of verticles:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Standard Verticles</dt>
<dd>
<p>These are the most common and useful type - they are always executed using an event loop thread.
We&#8217;ll discuss this more in the next section.</p>
</dd>
<dt class="hdlist1">Worker Verticles</dt>
<dd>
<p>These run using a thread from the worker pool. An instance is never executed concurrently by more
than one thread.</p>
</dd>
<dt class="hdlist1">Multi-threaded worker verticles</dt>
<dd>
<p>These run using a thread from the worker pool. An instance can be executed concurrently by more
than one thread.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_standard_verticles">Standard verticles</h3>
<div class="paragraph">
<p>Standard verticles are assigned an event loop thread when they are created and the start method is called with that
event loop. When you call any other methods that takes a handler on a core API from an event loop then Vert.x
will guarantee that those handlers, when called, will be executed on the same event loop.</p>
</div>
<div class="paragraph">
<p>This means we can guarantee that all the code in your verticle instance is always executed on the same event loop (as
long as you don&#8217;t create your own threads and call it!).</p>
</div>
<div class="paragraph">
<p>This means you can write all the code in your application as single threaded and let Vert.x worrying about the threading
and scaling. No more worrying about synchronized and volatile any more, and you also avoid many other cases of race conditions
and deadlock so prevalent when doing hand-rolled 'traditional' multi-threaded application development.</p>
</div>
</div>
<div class="sect2">
<h3 id="worker_verticles">Worker verticles</h3>
<div class="paragraph">
<p>A worker verticle is just like a standard verticle but it&#8217;s executed not using an event loop, but using a thread from
the Vert.x worker thread pool.</p>
</div>
<div class="paragraph">
<p>Worker verticles are designed for calling blocking code, as they won&#8217;t block any event loops.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t want to use a worker verticle to run blocking code, you can also run <a href="#blocking_code">inline blocking code</a>
directly while on an event loop.</p>
</div>
<div class="paragraph">
<p>If you want to deploy a verticle as a worker verticle you do that with <a href="apidocs/io/vertx/core/DeploymentOptions.html#setWorker-boolean-"><code>setWorker</code></a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">DeploymentOptions options = new DeploymentOptions().setWorker(true);
vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Worker verticle instances are never executed concurrently by Vert.x by more than one thread, but can executed by
different threads at different times.</p>
</div>
<div class="sect3">
<h4 id="_multi_threaded_worker_verticles">Multi-threaded worker verticles</h4>
<div class="paragraph">
<p>A multi-threaded worker verticle is just like a normal worker verticle but it <strong>can</strong> be executed concurrently by
different threads.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Multi-threaded worker verticles are an advanced feature and most applications will have no need for them.
Because of the concurrency in these verticles you have to be very careful to keep the verticle in a consistent state
using standard Java techniques for multi-threaded programming.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploying_verticles_programmatically">Deploying verticles programmatically</h3>
<div class="paragraph">
<p>You can deploy a verticle using one of the <a href="apidocs/io/vertx/core/Vertx.html#deployVerticle-io.vertx.core.Verticle-"><code>deployVerticle</code></a> method, specifying a verticle
name or you can pass in a verticle instance you have already created yourself.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Deploying Verticle <strong>instances</strong> is Java only.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Verticle myVerticle = new MyVerticle();
vertx.deployVerticle(myVerticle);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also deploy verticles by specifying the verticle <strong>name</strong>.</p>
</div>
<div class="paragraph">
<p>The verticle name is used to look up the specific <a href="apidocs/io/vertx/core/spi/VerticleFactory.html"><code>VerticleFactory</code></a> that will be used to
instantiate the actual verticle instance(s).</p>
</div>
<div class="paragraph">
<p>Different verticle factories are available for instantiating verticles in different languages and for various other
reasons such as loading services and getting verticles from Maven at run-time.</p>
</div>
<div class="paragraph">
<p>This allows you to deploy verticles written in any language from any other language that Vert.x supports.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of deploying some different types of verticles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle");

// Deploy a JavaScript verticle
vertx.deployVerticle("verticles/myverticle.js");

// Deploy a Ruby verticle verticle
vertx.deployVerticle("verticles/my_verticle.rb");</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rules_for_mapping_a_verticle_name_to_a_verticle_factory">Rules for mapping a verticle name to a verticle factory</h3>
<div class="paragraph">
<p>When deploying verticle(s) using a name, the name is used to select the actual verticle factory that will instantiate
the verticle(s).</p>
</div>
<div class="paragraph">
<p>Verticle names can have a prefix - which is a string followed by a colon, which if present will be used to look-up the factory, e.g.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>js:foo.js // Use the JavaScript verticle factory
groovy:com.mycompany.SomeGroovyCompiledVerticle // Use the Groovy verticle factory
service:com.mycompany:myorderservice // Uses the service verticle factory</pre>
</div>
</div>
<div class="paragraph">
<p>If no prefix is present, Vert.x will look for a suffix and use that to lookup the factory, e.g.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>foo.js // Will also use the JavaScript verticle factory
SomeScript.groovy // Will use the Groovy verticle factory</pre>
</div>
</div>
<div class="paragraph">
<p>If no prefix or suffix is present, Vert.x will assume it&#8217;s a Java fully qualified class name (FQCN) and try
and instantiate that.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_are_verticle_factories_located">How are Verticle Factories located?</h3>
<div class="paragraph">
<p>Most Verticle factories are loaded from the classpath and registered at Vert.x startup.</p>
</div>
<div class="paragraph">
<p>You can also programmatically register and unregister verticle factories using <a href="apidocs/io/vertx/core/Vertx.html#registerVerticleFactory-io.vertx.core.spi.VerticleFactory-"><code>registerVerticleFactory</code></a>
and <a href="apidocs/io/vertx/core/Vertx.html#unregisterVerticleFactory-io.vertx.core.spi.VerticleFactory-"><code>unregisterVerticleFactory</code></a> if you wish.</p>
</div>
</div>
<div class="sect2">
<h3 id="_waiting_for_deployment_to_complete">Waiting for deployment to complete</h3>
<div class="paragraph">
<p>Verticle deployment is asynchronous and may complete some time after the call to deploy has returned.</p>
</div>
<div class="paragraph">
<p>If you want to be notified when deployment is complete you can deploy specifying a completion handler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", res -&gt; {
  if (res.succeeded()) {
    System.out.println("Deployment id is: " + res.result());
  } else {
    System.out.println("Deployment failed!");
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The completion handler will be passed a result containing the deployment ID string, if deployment succeeded.</p>
</div>
<div class="paragraph">
<p>This deployment ID can be used later if you want to undeploy the deployment.</p>
</div>
</div>
<div class="sect2">
<h3 id="_undeploying_verticle_deployments">Undeploying verticle deployments</h3>
<div class="paragraph">
<p>Deployments can be undeployed with <a href="apidocs/io/vertx/core/Vertx.html#undeploy-java.lang.String-"><code>undeploy</code></a>.</p>
</div>
<div class="paragraph">
<p>Un-deployment is itself asynchronous so if you want to be notified when un-deployment is complete you can deploy specifying a completion handler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.undeploy(deploymentID, res -&gt; {
  if (res.succeeded()) {
    System.out.println("Undeployed ok");
  } else {
    System.out.println("Undeploy failed!");
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_number_of_verticle_instances">Specifying number of verticle instances</h3>
<div class="paragraph">
<p>When deploying a verticle using a verticle name, you can specify the number of verticle instances that you
want to deploy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">DeploymentOptions options = new DeploymentOptions().setInstances(16);
vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is useful for scaling easily across multiple cores. For example you might have a web-server verticle to deploy
and multiple cores on your machine, so you want to deploy multiple instances to take utilise all the cores.</p>
</div>
</div>
<div class="sect2">
<h3 id="_passing_configuration_to_a_verticle">Passing configuration to a verticle</h3>
<div class="paragraph">
<p>Configuration in the form of JSON can be passed to a verticle at deployment time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject config = new JsonObject().put("name", "tim").put("directory", "/blah");
DeploymentOptions options = new DeploymentOptions().setConfig(config);
vertx.deployVerticle("com.mycompany.MyOrderProcessorVerticle", options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration is then available via the <a href="apidocs/io/vertx/core/Context.html"><code>Context</code></a> object.</p>
</div>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_accessing_environment_variables_in_a_verticle">Accessing environment variables in a Verticle</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_verticle_isolation_groups">Verticle Isolation Groups</h3>
<div class="paragraph">
<p>By default, Vert.x has a <em>flat classpath</em>. I.e, it does everything, including deploying verticles without messing
with class-loaders. In the majority of cases this is the simplest, clearest and sanest thing to do.</p>
</div>
<div class="paragraph">
<p>However, in some cases you may want to deploy a verticle so the classes of that verticle are isolated from others in
your application.</p>
</div>
<div class="paragraph">
<p>This might be the case, for example, if you want to deploy two different versions of a verticle with the same class name
in the same Vert.x instance, or if you have two different verticles which use different versions of the same jar library.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Use this feature with caution. Class-loaders can be a can of worms, and can make debugging difficult, amongst
other things.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of using an isolation group to isolate a verticle deployment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">DeploymentOptions options = new DeploymentOptions().setIsolationGroup("mygroup");
options.setExtraClasspath(Arrays.asList("lib/jars/some-library.jar"));
vertx.deployVerticle("com.mycompany.MyIsolatedVerticle", options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Isolation groups are identified by a name, and the name can be used between different deployments if you want them
to share an isolated class-loader.</p>
</div>
<div class="paragraph">
<p>Extra classpath entries can also be provided with <a href="apidocs/io/vertx/core/DeploymentOptions.html#setExtraClasspath-java.util.List-"><code>setExtraClasspath</code></a> so they
can locate resources that are isolated to them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_high_availability">High Availability</h3>
<div class="paragraph">
<p>Verticles can be deployed with High Availability (HA) enabled.</p>
</div>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_verticles_from_the_command_line">Running Verticles from the command line</h3>
<div class="paragraph">
<p>You can use Vert.x directly in your Maven or Gradle projects in the normal way by adding a dependency to the Vert.x
core library and hacking from there.</p>
</div>
<div class="paragraph">
<p>However you can also run Vert.x verticles directly from the command line if you wish.</p>
</div>
<div class="paragraph">
<p>To do this you need to download and install a Vert.x distribution, and add the <code>bin</code> directory of the installation
to your <code>PATH</code> environment variable. Also make sure you have a Java 8 JDK on your <code>PATH</code>.</p>
</div>
<div class="paragraph">
<p>You can now run verticles by using the <code>vertx run</code> command. Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Run a JavaScript verticle
vertx run my_verticle.js

# Run a Ruby verticle
vertx run a_n_other_verticle.rb

# Run a Groovy script verticle, clustered
vertx run FooVerticle.groovy -cluster</pre>
</div>
</div>
<div class="paragraph">
<p>You can even run Java source verticles without compiling them first!</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run SomeJavaSourceFile.java</pre>
</div>
</div>
<div class="paragraph">
<p>Vert.x will compile the Java source file on the fly before running it. This is really useful for quickly
prototyping verticles and great for demos. No need to set-up a Maven or Gradle build first to get going!</p>
</div>
<div class="paragraph">
<p>For full information on the various options available when executing <code>vertx</code> on the command line,
type <code>vertx</code> at the command line.</p>
</div>
</div>
<div class="sect2">
<h3 id="_causing_vert_x_to_exit">Causing Vert.x to exit</h3>
<div class="paragraph">
<p>Threads maintained by Vert.x instances are not daemon threads so they will prevent the JVM from exiting.</p>
</div>
<div class="paragraph">
<p>If you are embedding Vert.x and you have finished with it, you can call <a href="apidocs/io/vertx/core/Vertx.html#close--"><code>close</code></a> to close it
down.</p>
</div>
<div class="paragraph">
<p>This will shut-down all internal thread pools and close other resources, and will allow the JVM to exit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_context_object">The Context object</h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_executing_periodic_and_delayed_actions">Executing periodic and delayed actions</h3>
<div class="paragraph">
<p>It&#8217;s very common in Vert.x to want to perform an action after a delay, or periodically.</p>
</div>
<div class="paragraph">
<p>In standard verticles you can&#8217;t just make the thread sleep to introduce a delay, as that will block the event loop thread.</p>
</div>
<div class="paragraph">
<p>Instead you use Vert.x timers. Timers can be <strong>one-shot</strong> or <strong>periodic</strong>. We&#8217;ll discuss both</p>
</div>
<div class="sect3">
<h4 id="_one_shot_timers">One-shot Timers</h4>
<div class="paragraph">
<p>A one shot timer calls an event handler after a certain delay, expressed in milliseconds.</p>
</div>
<div class="paragraph">
<p>To set a timer to fire once you use <a href="apidocs/io/vertx/core/Vertx.html#setTimer-long-io.vertx.core.Handler-"><code>setTimer</code></a> method passing in the delay and a handler</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">long timerID = vertx.setTimer(1000, id -&gt; {
  System.out.println("And one second later this is printed");
});

System.out.println("First this is printed");</code></pre>
</div>
</div>
<div class="paragraph">
<p>The return value is a unique timer id which can later be used to cancel the timer. The handler is also passed the timer id.</p>
</div>
</div>
<div class="sect3">
<h4 id="_periodic_timers">Periodic Timers</h4>
<div class="paragraph">
<p>You can also set a timer to fire periodically by using <a href="apidocs/io/vertx/core/Vertx.html#setPeriodic-long-io.vertx.core.Handler-"><code>setPeriodic</code></a>.</p>
</div>
<div class="paragraph">
<p>There will be an initial delay equal to the period.</p>
</div>
<div class="paragraph">
<p>The return value of <code>setPeriodic</code> is a unique timer id (long). This can be later used if the timer needs to be cancelled.</p>
</div>
<div class="paragraph">
<p>The argument passed into the timer event handler is also the unique timer id:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">long timerID = vertx.setPeriodic(1000, id -&gt; {
  System.out.println("And every second this is printed");
});

System.out.println("First this is printed");</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cancelling_timers">Cancelling timers</h4>
<div class="paragraph">
<p>To cancel a periodic timer, call <a href="apidocs/io/vertx/core/Vertx.html#cancelTimer-long-"><code>cancelTimer</code></a> specifying the timer id. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.cancelTimer(timerID);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_buffers">Buffers</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="event_bus">Getting a reference to the event bus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use <a href="apidocs/io/vertx/core/Vertx.html#eventBus--"><code>eventBus</code></a> to get a reference to the event bus.</p>
</div>
<div class="paragraph">
<p>The <a href="eventbus.html">event bus API manual</a> has full details on the API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_http_clients_and_servers">Creating HTTP Clients and Servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You create <a href="apidocs/io/vertx/core/http/HttpClient.html"><code>HttpClient</code></a> instances using the method <a href="apidocs/io/vertx/core/Vertx.html#createHttpClient-io.vertx.core.http.HttpClientOptions-"><code>createHttpClient</code></a>.</p>
</div>
<div class="paragraph">
<p>You create <a href="apidocs/io/vertx/core/http/HttpServer.html"><code>HttpServer</code></a> instances using the method <a href="apidocs/io/vertx/core/Vertx.html#createHttpServer-io.vertx.core.http.HttpServerOptions-"><code>createHttpServer</code></a>.</p>
</div>
<div class="paragraph">
<p>The <a href="http.html">HTTP API Manual</a> explains all about using HTTP with Vert.x.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_shared_data">Shared Data</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_local_shared_data">Local Shared Data</h3>

</div>
<div class="sect2">
<h3 id="_clustered_distributed_maps">Clustered Distributed Maps</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_udp">UDP</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_file_system">File System</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_dns">DNS</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_thread_safety">Thread safety</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Notes on thread safety of Vert.x objects</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-01-09 18:06:29 GMT
</div>
</div>
</body>
</html>